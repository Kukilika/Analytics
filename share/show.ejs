<!DOCTYPE html>
<html>
<head>
<title>Page Title</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.bundle.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"></script>
<script src="https://www.chartjs.org/samples/latest/utils.js"></script>
</head>
<body>


<div style="width:40%">
        <canvas id="myChart"></canvas>
</div>

<script>

var objs = <%- JSON.stringify(data) %>;

/*
var userInput = [
   {os: navigator.appVersion}, 
   {os: navigator.appVersion},
   {os: navigator.appVersion},
   {os: navigator.appVersion},
   {os: '5.0 (Mac NT 10.0; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36'},
   {os: '5.0 (Mac NT 10.0; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36'},
   {os: '5.0 (Linux 10.0; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36'},
   {os: '5.0 (Linux 10.0; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36'},
   {os: '5.0 (Android) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.102 Safari/537.36'}
];
*/

cnt = stats(objs);

function stats(users){
     osCnt = [0,0,0,0,0,0];
     for(i=0; i<users.length; i++) {
        var osU = users[i].browserVersion1b;
        if (osU.indexOf("Win")!=-1) osCnt[0]++;
        else if (osU.indexOf("Mac")!=-1) osCnt[1]++;
        else if (osU.indexOf("Linux")!=-1) osCnt[2]++;
        else if (osU.indexOf("Android")!=-1) osCnt[3]++;
        else if (osU.indexOf("iPhone")!=-1 || osU.indexOf("iPod")!=-1 || osU.indexOf("iPod")!=-1) osCnt[4]++;
        else osCnt[5]++;
     }
     return osCnt;
 }

var ctx = document.getElementById("myChart").getContext('2d');

data = {
    datasets: [{
        data: [cnt[0], cnt[1], cnt[2], cnt[3], cnt[4], cnt[5] ],
        backgroundColor: [
						window.chartColors.red,
						window.chartColors.orange,
						window.chartColors.yellow,
						window.chartColors.green,
                        window.chartColors.blue,
                        window.chartColors.grey
		],
    }],

    // These labels appear in the legend and in the tooltips when hovering different arcs
    labels: [
        'Windows',
        'Mac',
        'Linux',
        'Android',
        'iOS',
        'Other'
    ]
};

var myPieChart = new Chart(ctx,{
    type: 'pie',
    data: data
});


</script>




</body>
</html>